name: Deploy

inputs:
  FIREBASE_SERVICE_ACCOUNT:
    description: 'Service account JSON key'
    required: true

runs:
  using: "composite"
  steps:
    - name: Upload Pages Artifact
      uses: actions/upload-pages-artifact@v3
      with:
        path: "public/"

    - name: Deploy to GitHub Pages
      uses: actions/deploy-pages@v4

    - uses: actions/setup-node@v4
      # FirebaseExtended/action-hosting-deploy uses `npx`

    - uses: FirebaseExtended/action-hosting-deploy@v0.9.0
      with:
        firebaseServiceAccount: "${{ inputs.FIREBASE_SERVICE_ACCOUNT }}"
        projectId: auto-aur
        channelId: live
